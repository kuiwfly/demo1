/**
 * New node file
 */
var DB = require('./db.js').DB ;
var _DBURL="mongodb://localhost/";
var _DBNAME = "demo1";
var mongoose = DB.init(_DBURL,_DBNAME);
var model = {
             username:String,
             password:String,
             email:String
             };
function createModel(){
	if(db_user.User!=null){
		return db_user.User;
	}
	
	var userSchema = new mongoose.Schema(model);
	
	return db_user.User = mongoose.model('User', userSchema);
}

function insert(data){
	var User = db_user.model();
	var user = new User(data);
	user.save(function(err,user){
		if (err) 
			return console.error(err);
			console.dir(user);
		}
	);
}
function update(data){
	
}
function find(data){
	var User = db_user.model();
	console.log("find");
	User.find({username:data.username},function(users){
		console.log("find");
		console.dir(users);
	}
	);
}


var db_user = {
        User:null,
		model:createModel,
		insert:insert,
		find:find
		
		
};
exports.db_user = db_user ;
