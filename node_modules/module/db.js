/**
 * New node file
 */
//var mongoose = require('mongoose');
//function initDB(dbURL,dbName){
//	var db = mongoose.connection;
//	
//	db.on('error', console.error);
//	db.once('open', function() {
//	  // Create your schemas and models here.
//	});
//	
//	//mongoose.connect('mongodb://localhost/test');
//	mongoose.connect(dbURL+dbName);	
//	return mongoose ;
//}

var DB = {
    mongoose:null,
	db:null,
	init:function(dbURL,dbName){
		if(DB.mongoose!=null&&db!=null){
			return DB.mongoose ;
		}
		DB.mongoose = require('mongoose');
		DB.db = DB.mongoose.connection;
		
		DB.db.on('error', console.error);
		DB.db.once('open', function() {
		// Create your schemas and models here.
		});

		//mongoose.connect('mongodb://localhost/test');
		DB.mongoose.connect(dbURL+dbName);	
		return DB.mongoose;
	}

};

exports.DB = DB ;
